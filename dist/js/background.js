var get=function(t,r){return new Promise(function(e,s){var n=new XMLHttpRequest;"json"===r&&(n.responseType=r),n.open("GET",t),n.onload=function(){200===n.status?e(n):s(Error(n.statusText+" ("+n.status+")"))},n.onerror=function(){s(Error("Network Error"))},n.send()})};chrome.runtime.onMessage.addListener(function(s,e,n){var t=null;return"msg.jsonrequest"===s.action&&(t="json"),get(s.url,t).then(function(e){"msg.httprequest"===s.action?n({success:!0,message:e.responseText}):"msg.jsonrequest"===s.action&&n({success:!0,message:e.response})}).catch(function(e){n({success:!1,message:e.message})}),!0});