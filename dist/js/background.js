var get=function(e,s){return new Promise(function(n,t){var r=new XMLHttpRequest;"json"===s&&(r.responseType=s),r.open("GET",e),r.onload=function(){200===r.status?n(r):t(Error(r.statusText+" ("+r.status+")"))},r.onerror=function(){t(Error("Network Error"))},r.send()})};chrome.runtime.onMessage.addListener(function(e,s,n){if("msg.opentab"===e.action)return chrome.tabs.create({url:e.url}),!0;var t=null;return"msg.jsonrequest"===e.action&&(t="json"),get(e.url,t).then(function(s){"msg.httprequest"===e.action?n({success:!0,message:s.responseText}):"msg.jsonrequest"===e.action&&n({success:!0,message:s.response})}).catch(function(e){n({success:!1,message:e.message})}),!0});