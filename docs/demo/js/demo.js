var get=function(e,n,s){return new Promise(function(o,t){var r=new XMLHttpRequest;"json"===n&&(r.responseType=n),s&&(e="https://allorigins.me/get?method=raw&url="+encodeURIComponent(e)),r.open("GET",e),r.onload=function(){200===r.status?o("json"===n?r.response:r.responseText):t(Error(r.statusText+" ("+r.status+")"))},r.onerror=function(){t(Error("Network Error"))},r.send()})},chrome={extension:{getURL:function(e){return e}},runtime:{sendMessage:function(e,n){e.proxy=!1!==e.proxy;var s="xml";"msg.jsonrequest"===e.action&&(s="json"),get(e.url,s,!!e.proxy).then(function(e){n({success:!0,message:e})}).catch(function(e){n({success:!1,message:e.message})})}}};