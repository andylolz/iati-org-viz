var get=function(e,s){return new Promise(function(t,n){var o=new XMLHttpRequest;"json"===s&&(o.responseType=s),o.open("GET",e),o.onload=function(){200===o.status?t("json"===s?o.response:o.responseText):n(Error(o.statusText+" ("+o.status+")"))},o.onerror=function(){n(Error("Network Error"))},o.send()})},chrome={extension:{getURL:function(e){return e}},runtime:{sendMessage:function(e,s){var t="xml";"msg.jsonrequest"===e.action&&(t="json"),e.dataset&&(e.url="https://iati-proxy.herokuapp.com/raw?dataset="+encodeURIComponent(e.dataset)),get(e.url,t).then(function(e){s({success:!0,message:e})}).catch(function(e){s({success:!1,message:e.message})})}}};