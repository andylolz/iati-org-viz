var get=function(e,n,s){return new Promise(function(o,r){var t=new XMLHttpRequest;"json"===n&&(t.responseType=n),s&&(e="https://pwyf-proxy.herokuapp.com/req/raw?url="+encodeURIComponent(e)),t.open("GET",e),t.onload=function(){200===t.status?o("json"===n?t.response:t.responseText):r(Error(t.statusText+" ("+t.status+")"))},t.onerror=function(){r(Error("Network Error"))},t.send()})},chrome={extension:{getURL:function(e){return e}},runtime:{sendMessage:function(e,n){e.proxy=!1!==e.proxy;var s="xml";"msg.jsonrequest"===e.action&&(s="json"),get(e.url,s,!!e.proxy).then(function(e){n({success:!0,message:e})}).catch(function(e){n({success:!1,message:e.message})})}}};